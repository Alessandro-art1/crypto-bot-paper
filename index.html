<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Crypto Bot</title>
<style>
body {
    background: #0b0f0c;
    color: #00ff66;
    font-family: Arial;
}
.container {
    max-width: 900px;
    margin: auto;
}
.card {
    border: 1px solid #00ff66;
    padding: 15px;
    margin-bottom: 20px;
}
.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}
</style>
</head>
<body>

<div class="container">
<h1>ðŸ¤– Crypto Bot â€“ Paper Trading</h1>

<div class="card" id="global"></div>
<div class="grid" id="crypto"></div>
</div>

<script>
async function load() {
    const r = await fetch("/api/status");
    const d = await r.json();

    document.getElementById("global").innerHTML = `
        <h2>ðŸ“Š Generale</h2>
        <p>Valore totale: ${d.valore_totale_eur} â‚¬</p>
        <p>Profitto: ${d.profitto_eur} â‚¬</p>
        <p>Trade: ${d.numero_trade}</p>
        <p>Aggiornato: ${d.ultimo_aggiornamento}</p>
    `;

    let html = "";
    for (const [c,v] of Object.entries(d.portfolio)) {
        html += `
        <div class="card">
            <h2>${c}</h2>
            <p>Prezzo: ${v.prezzo} â‚¬</p>
            <p>RSI: ${v.rsi ?? "calcolo..."}</p>
            <p>Qty: ${v.qty.toFixed(6)}</p>
            <p>Trade: ${v.trade}</p>
        </div>`;
    }
    document.getElementById("crypto").innerHTML = html;
}

load();
setInterval(load, 5000);
</script>

</body>
</html>
